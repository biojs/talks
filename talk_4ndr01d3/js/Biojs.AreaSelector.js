Biojs.AreaSelector=Biojs.extend({constructor:function(b){var a=this;
$("#"+a.opt.target).css("position","relative");
var c="<div class='selector'>";
if(a.opt.resize_left){c+="<div class='scaler left'></div>";
}if(a.opt.resize_right){c+="<div class='scaler right'></div>";
}if(a.opt.resize_top){c+="<div class='scaler top'></div>";
}if(a.opt.resize_bottom){c+="<div class='scaler bottom'></div>";
}c+="<div>";
$("#"+a.opt.target).append(c);
$("#"+a.opt.target+" .selector .right").draggable({axis:"x",start:function(d){a.updateScalers();
$(this).parent().css("border-right-width","0px");
},stop:function(d){$("#"+a.opt.target+" .selector").width(a._removePx($(this).css("left"))+5);
$(this).parent().css("border-right-width","1px");
a.updateScalers();
a.raiseEvent("onRegionChanged",{region:a.getCoveredArea()});
}});
$("#"+a.opt.target+" .selector .left").draggable({axis:"x",start:function(d){a.updateScalers();
$(this).parent().css("border-left-width","0px");
},stop:function(d){var e=$(this).position().left+5;
$("#"+a.opt.target+" .selector").width($("#"+a.opt.target+" .selector").width()-e);
$("#"+a.opt.target+" .selector").css("left",($(this).parent().position().left+e)+"px");
$(this).parent().css("border-left-width","1px");
a.updateScalers();
a.raiseEvent("onRegionChanged",{region:a.getCoveredArea()});
}});
$("#"+a.opt.target+" .selector .bottom").draggable({axis:"y",start:function(d){a.updateScalers();
$(this).parent().css("border-bottom-width","0px");
},stop:function(d){$("#"+a.opt.target+" .selector").height(a._removePx($(this).css("top"))+5);
$(this).parent().css("border-bottom-width","1px");
a.updateScalers();
a.raiseEvent("onRegionChanged",{region:a.getCoveredArea()});
}});
$("#"+a.opt.target+" .selector .top").draggable({axis:"y",start:function(d){a.updateScalers();
$(this).parent().css("border-top-width","0px");
},stop:function(d){var e=$(this).position().top+5;
$("#"+a.opt.target+" .selector").height($("#"+a.opt.target+" .selector").height()-e);
$("#"+a.opt.target+" .selector").css("top",($(this).parent().position().top+e)+"px");
$(this).parent().css("border-top-width","1px");
a.updateScalers();
a.raiseEvent("onRegionChanged",{region:a.getCoveredArea()});
}});
$("#"+a.opt.target).watch("left,top,width,height,display",function(){a.updateScalers();
},100,"_containerMove");
a.updateScalers();
a.setCoveredArea(a.opt.area);
},opt:{target:"YourOwnDivId",resize_left:true,resize_right:true,resize_top:true,resize_bottom:true,area:[0,0,50,50]},eventTypes:["onRegionChanged"],getCoveredArea:function(){var a=this;
return[$("#"+a.opt.target+" .selector").position().left,$("#"+a.opt.target+" .selector").position().top,$("#"+a.opt.target+" .selector").position().left+$("#"+a.opt.target+" .selector").width(),$("#"+a.opt.target+" .selector").position().top+$("#"+a.opt.target+" .selector").height()];
},setCoveredArea:function(b){var a=this;
$("#"+a.opt.target+" .selector").css("left",b[0]+"px");
$("#"+a.opt.target+" .selector").css("top",b[1]+"px");
$("#"+a.opt.target+" .selector").width(b[2]-b[0]);
$("#"+a.opt.target+" .selector").height(b[3]-b[1]);
a.updateScalers();
a.raiseEvent("onRegionChanged",{region:a.getCoveredArea()});
},updateScalers:function(){var a=this;
$("#"+a.opt.target+" .selector .left").css("left","-5px");
$("#"+a.opt.target+" .selector .left").css("top",($("#"+a.opt.target+" .selector").height()/2)-5);
$("#"+a.opt.target+" .selector .right").css("left",$("#"+a.opt.target+" .selector").width()-5);
$("#"+a.opt.target+" .selector .right").css("top",($("#"+a.opt.target+" .selector").height()/2)-5);
$("#"+a.opt.target+" .selector .top").css("left",($("#"+a.opt.target+" .selector").width()/2)-5);
$("#"+a.opt.target+" .selector .top").css("top","-5px");
$("#"+a.opt.target+" .selector .bottom").css("left",($("#"+a.opt.target+" .selector").width()/2)-5);
$("#"+a.opt.target+" .selector .bottom").css("top",$("#"+a.opt.target+" .selector").height()-5);
$("#"+a.opt.target+" .selector .right").draggable("option","containment",[$("#"+a.opt.target+" .selector").offset().left-3,$("#"+a.opt.target).offset().top,$("#"+a.opt.target).offset().left+$("#"+a.opt.target).width()-4,$("#"+a.opt.target).offset().top+$("#"+a.opt.target).height()]);
$("#"+a.opt.target+" .selector .left").draggable("option","containment",[$("#"+a.opt.target).offset().left-4,$("#"+a.opt.target).offset().top,$("#"+a.opt.target+" .selector").offset().left+$("#"+a.opt.target+" .selector").width()-5,$("#"+a.opt.target).offset().top+$("#"+a.opt.target).height()]);
$("#"+a.opt.target+" .selector .bottom").draggable("option","containment",[$("#"+a.opt.target).offset().left,$("#"+a.opt.target+" .selector").offset().top-3,$("#"+a.opt.target).offset().left+$("#"+a.opt.target).width(),$("#"+a.opt.target).offset().top+$("#"+a.opt.target).height()-4]);
$("#"+a.opt.target+" .selector .top").draggable("option","containment",[$("#"+a.opt.target).offset().left,$("#"+a.opt.target).offset().top-4,$("#"+a.opt.target).offset().left+$("#"+a.opt.target).width()-4,$("#"+a.opt.target+" .selector").offset().top+$("#"+a.opt.target+" .selector").height()-5]);
},_removePx:function(a){return 1*a.substr(0,a.length-2);
}});
